<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NGUI Demo</title>
  <!-- Tailwind CSS CDN -->
  <script src="ngui/3p/tailwind/tailwind.js"></script>

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!-- jQuery UI -->
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

  <!-- Fancytree -->
  <link href="ngui/3p/fancytree/ui.fancytree.min.css" rel="stylesheet" />
  <script src="ngui/3p/fancytree/jquery.fancytree-all-deps.min.js"></script>

  <link href="ngui/NGUI.css" rel="stylesheet" /
  <!-- NGUI Scripts -->
  <script src="ngui/NGUIConnection.js"></script>
  <script src="ngui/NGUIModalTailwind.js"></script>
  <script src="ngui/NGUIWindowTailwind.js"></script>
  <script src="ngui/NGUITree.js"></script>
  <script src="ngui/NGUISplitter.js"></script>

  <style>
    /* Grundlegendes Layout und Schriftfamilie f√ºr die gesamte Seite */
    html,
    body {
      height: 100%;
      margin: 0;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    }


  </style>
</head>

<body>
  <div id="container">
    <div id="tree-container">
      <div>
        <div class="p-4 pb-2">
          <h1 class="text-xl font-bold text-gray-800 mb-1 flex items-center gap-2">
            <svg class="w-6 h-6 text-blue-500" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
            </svg>
            Explorer Dashboard
          </h1>
          <div class="flex items-center gap-2">
            <img src="https://ui-avatars.com/api/?name=Max+Mustermann&background=0D8ABC&color=fff" alt="Avatar"
              class="w-8 h-8 rounded-full shadow">
            <span class="text-sm text-gray-600 font-medium">Max Mustermann</span>
          </div>
        </div>
      </div>
<div class="flex gap-2 mb-2 btn-group text-xs">
<button style="width: 130px;" class="px-2 py-1 bg-gray-700 text-white rounded hover:bg-gray-800" onclick="window.tree.HighLightNode('6')">Highlight</button>
<hr><button style="width: 130px;" class="px-2 py-1 bg-gray-700 text-white rounded hover:bg-gray-800" onclick="window.tree.ExpandNode('8')">Expand</button>
<hr><button style="width: 130px;" class="px-2 py-1 bg-gray-700 text-white rounded hover:bg-gray-800" onclick="window.tree.CollapsNode('8')">Collapse</button>
</div>      
      <table id="treegrid" class="fancytree-ext-table"></table>

    </div>
    <div id="splitter-vertical"></div>
    <div id="right-top">
      <div id="bereich1"></div>
    </div>
    <div id="splitter-horizontal"></div>
    <div id="right-bottom">
      <div id="bereich2"></div>
    </div>
  </div>

  <script>
    // guckst du:
    // https://www.william-troup.com/jsontree-js/examples/themes.html



    var g_NGUI = new NGUIClient();
    g_NGUI.Connect("ws://localhost:2808", OnAppOpen);
    var g_DB = g_NGUI.GetDbClient();

    const splitter = new NGUI_Splitter("#container");
    splitter.enableVerticalSplitter("#splitter-vertical", {
      minWidth: 200,
      maxWidth: 600,
    });
    splitter.enableHorizontalSplitter("#splitter-horizontal", {
      minHeight: 20,
      maxHeightOffset: 200,
    });


    function OnAppOpen() {
      console.log("App opened");
      g_NGUI.LoadPage("NGUI_kitchensink.html", "right-bottom", null);
      g_NGUI.LoadPage("NGUI_DemoTop.html", "right-top", null);
      g_NGUI.LoadResource("NGUI_DemoTree.json", null, OnJSON);
    }
    
    function SelectTreeCfg()
    {
          window.tree.setConfig(treeConfigs.material);
          window.tree.setData(window.parsedData);      
    }

    function OnJSON(data) {
      try {
        window.parsedData = JSON.parse(data.data);
        console.log("Parsed JSON:", parsedData);

        window.tree = new NGUITree('#treegrid', {
          columns: [
            { title: 'mass', field: 'mass', dataSource: 'data', formatter: (value) => value !== undefined ? value : '' },
          ],
          onNodeClick: (data) => {
            console.log('Node clicked:', data.node.title, data.node.data);
          },
        });

        window.tree.setData(parsedData);
      } catch (error) {
        console.error('Error parsing JSON:', error);
      }
    }
  </script>
</body>
</html>
